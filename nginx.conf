server {
    listen 5014;
    server_name localhost;

    location /media/ {
        root /usr/share/nginx/html;
        autoindex on; # Enable directory listing for easy debugging
        types {
            application/dash+xml mpd;  # MPEG-DASH MPD files
            video/mp4 mp4;             # MP4 video files
            audio/ogg opus;            # Opus audio files
            image/avif avif;           # AVIF image files
        }

        # CORS headers for cross-origin requests
        add_header 'Access-Control-Allow-Origin' '*';
        add_header 'Access-Control-Allow-Methods' 'GET, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'Origin, X-Requested-With, Content-Type, Accept';
        
        # Caching headers for better performance
        add_header 'Cache-Control' 'public, max-age=31536000, immutable';

        # Security headers (optional)
        add_header 'X-Content-Type-Options' 'nosniff';
        add_header 'X-Frame-Options' 'DENY';
        add_header 'X-XSS-Protection' '1; mode=block';
    }
}
